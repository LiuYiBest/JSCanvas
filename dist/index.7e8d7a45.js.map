{"mappings":"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","sources":["src/main.js"],"sourcesContent":["let canvas = document.getElementById(\"drawing-board\");\r\nlet ctx = canvas.getContext(\"2d\");\r\n\r\nlet eraser = document.getElementById(\"eraser\");\r\nlet brush = document.getElementById(\"brush\");\r\nlet remove = document.getElementById(\"remove\");\r\nlet ColorBtn = document.getElementsByClassName(\"color-item\");\r\nlet save = document.getElementById(\"save\");\r\nlet range = document.getElementById(\"range\");\r\n\r\nlet clear = false;\r\nlet lWidth = 2;\r\nautoSetSize(canvas);\r\nlistenToUser(canvas);\r\ngetColor();\r\n\r\nfunction autoSetSize(canvas) {\r\n    canvasSetSize();\r\n    function canvasSetSize() {\r\n        let pageWidth = document.documentElement.clientWidth;\r\n        let pageHeight = document.documentElement.clientHeight;\r\n        canvas.width = pageWidth;\r\n        canvas.height = pageHeight;\r\n    }\r\n    window.onresize = function () {\r\n        canvasSetSize();\r\n    };\r\n}\r\n\r\nfunction listenToUser(canvas) {\r\n    let painting = false;\r\n    let lastPoint = { x: undefined, y: undefined };\r\n    canvas.onmousedown = function (e) {\r\n        this.firstDot = ctx.getImageData(0, 0, canvas.width, canvas.height); //在这里储存绘图表面\r\n        painting = true;\r\n        let x = e.clientX;\r\n        let y = e.clientY;\r\n        lastPoint = { x: x, y: y };\r\n        ctx.save();\r\n        drawCircle(x, y, 0);\r\n    };\r\n    canvas.onmousemove = function (e) {\r\n        if (painting) {\r\n            let x = e.clientX;\r\n            let y = e.clientY;\r\n            let newPoint = { x: x, y: y };\r\n            drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y, clear);\r\n            lastPoint = newPoint;\r\n        }\r\n    };\r\n    canvas.onmouseup = function () {\r\n        painting = false;\r\n    };\r\n    canvas.mouseleave = function () {\r\n        painting = false;\r\n    };\r\n\r\n}\r\n\r\nfunction drawCircle(x, y, radius) {\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    if (clear) {\r\n        ctx.clip();\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\nfunction drawLine(x1, y1, x2, y2) {\r\n    ctx.lineWidth = lWidth;\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = \"round\";\r\n    if (clear) {\r\n        ctx.save();\r\n        ctx.globalCompositeOperation = \"destination-out\";\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n        ctx.clip();\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.restore();\r\n    } else {\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n    }\r\n}\r\n\r\nrange.onchange = function () {\r\n    lWidth = this.value;\r\n};\r\n\r\neraser.onclick = function () {\r\n    clear = true;\r\n    this.classList.add(\"active\");\r\n    brush.classList.remove(\"active\");\r\n};\r\n\r\nbrush.onclick = function () {\r\n    clear = false;\r\n    this.classList.add(\"active\");\r\n    eraser.classList.remove(\"active\");\r\n};\r\n\r\nremove.onclick = function () {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    setCanvasBg(\"white\");\r\n};\r\n\r\nsave.onclick = function () {\r\n    let imgUrl = canvas.toDataURL(\"image/png\");\r\n    let saveA = document.createElement(\"a\");\r\n    document.body.appendChild(saveA);\r\n    saveA.href = imgUrl;\r\n    saveA.download = \"zspic\" + new Date().getTime();\r\n    saveA.target = \"_blank\";\r\n    saveA.click();\r\n};\r\n\r\nfunction getColor() {\r\n    for (let i = 0; i < ColorBtn.length; i++) {\r\n        ColorBtn[i].onclick = function () {\r\n            for (let i = 0; i < ColorBtn.length; i++) {\r\n                ColorBtn[i].classList.remove(\"active\");\r\n                this.classList.add(\"active\");\r\n                activeColor = this.style.backgroundColor;\r\n                ctx.fillStyle = activeColor;\r\n                ctx.strokeStyle = activeColor;\r\n            }\r\n        };\r\n    }\r\n}\r\n"],"names":["canvas","document","getElementById","ctx","getContext","eraser","brush","remove","ColorBtn","getElementsByClassName","save","range","clear","lWidth","autoSetSize","canvasSetSize","pageWidth","documentElement","clientWidth","pageHeight","clientHeight","width","height","window","onresize","listenToUser","painting","lastPoint","x","undefined","y","onmousedown","e","this","firstDot","getImageData","clientX","clientY","drawCircle","onmousemove","newPoint","drawLine","onmouseup","mouseleave","radius","beginPath","arc","Math","PI","fill","clip","clearRect","restore","x1","y1","x2","y2","lineWidth","lineCap","lineJoin","globalCompositeOperation","moveTo","lineTo","stroke","closePath","getColor","i","length","onclick","classList","add","activeColor","style","backgroundColor","fillStyle","strokeStyle","onchange","value","setCanvasBg","imgUrl","toDataURL","saveA","createElement","body","appendChild","href","download","Date","getTime","target","click"],"version":3,"file":"index.7e8d7a45.js.map"}